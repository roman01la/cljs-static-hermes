set(BUILD_SHARED_LIBS OFF CACHE BOOL "Disable shared libraries" FORCE)
set(LWS_BUILD_SHARED OFF CACHE BOOL "Disable libwebsockets shared library" FORCE)
set(LWS_BUILD_STATIC ON CACHE BOOL "Enable libwebsockets static library" FORCE)
set(LWS_WITH_SSL OFF CACHE BOOL "Disable SSL support" FORCE)
set(LWS_WITH_ZLIB OFF CACHE BOOL "Disable zlib support" FORCE)
set(LWS_WITH_LIBUV OFF CACHE BOOL "Disable libuv integration" FORCE)
set(LWS_WITH_LIBEVENT OFF CACHE BOOL "Disable libevent integration" FORCE)
set(LWS_WITH_PLUGINS OFF CACHE BOOL "Disable plugins" FORCE)
set(LWS_WITH_HTTP2 OFF CACHE BOOL "Disable HTTP/2 support" FORCE)
set(LWS_WITH_MINIMAL_EXAMPLES OFF CACHE BOOL "Skip minimal examples" FORCE)
set(LWS_WITHOUT_TESTAPPS ON CACHE BOOL "Skip test applications" FORCE)
set(LWS_WITH_SERVER OFF CACHE BOOL "Disable server role" FORCE)
set(LWS_WITH_CLIENT ON CACHE BOOL "Enable client role" FORCE)
set(LWS_WITH_SHARED OFF CACHE BOOL "Disable shared object exports" FORCE)
set(LWS_WITHOUT_EXTENSIONS ON CACHE BOOL "Disable protocol extensions" FORCE)
set(DISABLE_WERROR ON CACHE BOOL "Do not treat warnings as errors" FORCE)

set(LIBWEBSOCKETS_SOURCE_DIR "${CMAKE_CURRENT_SOURCE_DIR}/libwebsockets")

add_subdirectory(${LIBWEBSOCKETS_SOURCE_DIR} ${CMAKE_CURRENT_BINARY_DIR}/libwebsockets)

if (TARGET websockets_static AND NOT TARGET websockets)
    add_library(websockets INTERFACE)
    target_link_libraries(websockets INTERFACE websockets_static)
endif()
